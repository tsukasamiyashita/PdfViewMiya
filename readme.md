# PDF Viewer App

起動と描画の高速化に特化し、スクロール遅延ロード（Lazy Loading）を採用したシンプルなデスクトップPDFビューアです。1ファイルで動作し、一般的な印刷機能やズーム機能も備えています。

## 修正と改善点（不具合対策済）
- **白紙化バグの根本解決**: `PyMuPDF`から生成した画像メモリがPythonのガベージコレクションによって破棄される問題を回避するため、画像データを一度PPMバイナリデータに変換し、`QPixmap`に直接ロードさせる安全な方式に変更しました。
- **レイアウトと描画判定の厳密化**: QScrollAreaのビューポート座標系とPDFページの座標系を正確にマッピング（`intersects`判定）し、スクロール時に確実に見えている部分だけを描画するようにしました。
- **メモリリーク・クラッシュ対策**: 
  - 古いPDFを閉じた際やズーム変更時に、メモリ上に残ったウィジェット（画像データ）を確実に破棄・クリーンアップする処理を追加しました。
  - 極端な拡大・縮小操作でアプリがクラッシュするのを防ぐため、ズーム倍率に上限（x5.0）と下限（x0.2）を設けました。
  - ページ間のマージンや枠線を設定し、複数ページ閲覧時の視認性を向上させました。

## 特徴
- **高速描画**: `PyMuPDF`を採用し、現在画面に表示されている領域だけを描画・メモリ確保します。
- **標準UI**: 一般的なアプリと同様の操作感（スクロール、印刷ダイアログ）。
- **シングルファイル**: `app.py` 1つで全ての動作が完結。

## インストール

必要なライブラリをインストールします。

```bash
pip install -r requirements.txt